<!DOCTYPE html>
<html lang="en">

<head>
    <title>Javascript</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="icon" href="data:;base64,=">

    <link rel="stylesheet" href="style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <script type="text/javascript" src="renpy2js.js"></script>
    <script type="text/javascript" src="script.js"></script>

</head>

<body>
<div id="debug">
</div>

<div class="ctnr">
    <header></header>

    <main>
       <div id="canvas"></div>
    </main>

    <footer>
        <span id="button_minus" class="bottom_action">âž–</span>
        <span id="button_plus" class="bottom_action">âž•</span>
        <span id="button_back" class="bottom_action">ðŸ”™</span>
    </footer>
</div>
<script>
    // CANVAS SETUP:
    // canvas = document.getElementById('canvas')
    //canvas.addEventListener('click', (event) => { if (event.target == canvas) { revealItem(1); } }, true);
    canvas.addEventListener('click', (event) => {
        log("CLICK")
        revealItem(1);
    }, true);


    document.body.addEventListener('keydown', (event) => {
        // log("------ keydown")
        var key = event.key

        if (key == " ") {
            revealItem(999)
        } else if (window.debug && key == "d") {
            window.context.get("__SHOW_DEBUG") ? window.context.set("__SHOW_DEBUG", false) : window.context.set("__SHOW_DEBUG", true)
            render_debug();
            log([...window.context.entries()], "context");
            log(document.cookie, "cookie");
        } else if (window.debug && key == "x") {
            log("CLEARING cookies, localStorage and context")
            deleteAllCookies()
            localStorage.clear()
            window.context.clear()
        } else if (window.debug && (key == "z")) {
            click_go_back()
        }

    })

    document.getElementById('button_back').addEventListener('click', action_back, true);
    document.getElementById('button_plus').addEventListener('click', function(e){action_fontsize(+8);e.stopPropagation();}, true);
    document.getElementById('button_minus').addEventListener('click', function(e){action_fontsize(-8);e.stopPropagation();}, true);

    // START RENDER AND INTERACTION:
    render_init()

    /* BACK-BUTTON:    <div>Icons made by <a href="https://www.flaticon.com/authors/kiranshastry" title="Kiranshastry">Kiranshastry</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>*/
</script>

</body>
</html>